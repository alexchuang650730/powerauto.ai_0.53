## OCRè¡¨æ ¼è¿˜åŸèƒ½åŠ›åˆ†ææŠ¥å‘Š

### ğŸ“‹ æµ‹è¯•æ¦‚å†µ

**æµ‹è¯•æ–‡æ¡£**: å°æ¹¾é“¶è¡Œäººå¯¿åˆ©ç‡å˜åŠ¨å‹äººå¯¿ä¿é™©è¦ä¿ä¹¦  
**è¡¨æ ¼ç±»å‹**: ä¿é™©ç”³è¯·è¡¨æ ¼  
**è¡¨æ ¼å¤æ‚åº¦**: é«˜ï¼ˆå¤šå±‚åµŒå¥—ã€æ··åˆå†…å®¹ï¼‰  

### ğŸ“Š è¡¨æ ¼ç»“æ„åˆ†æ

#### **1. è¡¨æ ¼æ•´ä½“ç»“æ„**

**åŸå§‹è¡¨æ ¼ç‰¹å¾**:
- **å¤šå±‚è¡¨æ ¼**: ä¸»è¡¨æ ¼åŒ…å«å¤šä¸ªå­è¡¨æ ¼
- **æ··åˆå†…å®¹**: å°åˆ·ä½“æ ‡é¢˜ + æ‰‹å†™å¡«å†™å†…å®¹
- **å¤æ‚å¸ƒå±€**: ä¸è§„åˆ™å•å…ƒæ ¼ã€åˆå¹¶å•å…ƒæ ¼
- **è¡¨æ ¼çº¿æ¡**: é»‘è‰²è¾¹æ¡†çº¿ï¼Œéƒ¨åˆ†è™šçº¿

#### **2. OCRè¡¨æ ¼è¯†åˆ«ç»“æœ**

**Tesseractè¡¨æ ¼è¿˜åŸæ•ˆæœ**:

##### **âœ… æˆåŠŸè¯†åˆ«çš„è¡¨æ ¼éƒ¨åˆ†**

1. **åŸºæœ¬ä¿¡æ¯è¡¨æ ¼**
```
å§“å: [æ‰‹å†™å†…å®¹]
æ€§åˆ«: ç”· â˜‘ å¥³ â˜  
å‡ºç”Ÿæ—¥æœŸ: 79å¹´5æœˆ29æ—¥
å¹´é¾„: 26å²
```
- âœ… è¡¨æ ¼æ¡†æ¶è¯†åˆ«æ­£ç¡®
- âœ… æ ‡ç­¾æ–‡å­—è¯†åˆ«å‡†ç¡®
- âš ï¸ æ‰‹å†™å†…å®¹è¯†åˆ«éƒ¨åˆ†å‡†ç¡®

2. **ä¿é™©ä¿¡æ¯è¡¨æ ¼**
```
ä¿é™©åç§°: å®‰å¿ƒå‚³å®¶åˆ©ç‡è®Šå‹•å‹çµ‚èº«
ä¿éšªé‡‘é¡: 70ä¸‡å…ƒ
ä¿éšªæœŸé–“: 20å¹´
ä¸»å¥‘ç´„ä¿éšªè²»: 8970å…ƒ
```
- âœ… è¡¨æ ¼ç»“æ„åŸºæœ¬ä¿æŒ
- âœ… æ•°å­—ä¿¡æ¯è¯†åˆ«å‡†ç¡®
- âœ… é‡‘é¢æ ¼å¼è¯†åˆ«æ­£ç¡®

##### **âŒ è¯†åˆ«å›°éš¾çš„è¡¨æ ¼éƒ¨åˆ†**

1. **å¤æ‚åµŒå¥—è¡¨æ ¼**
- å¤šå±‚è¡¨æ ¼ç»“æ„ä¸¢å¤±
- å•å…ƒæ ¼è¾¹ç•Œè¯†åˆ«é”™è¯¯
- è¡Œåˆ—å¯¹åº”å…³ç³»æ··ä¹±

2. **è¡¨æ ¼çº¿æ¡å¹²æ‰°**
- è¡¨æ ¼çº¿æ¡è¢«è¯†åˆ«ä¸ºæ–‡å­—
- çº¿æ¡åˆ†å‰²å½±å“æ–‡æœ¬è¿ç»­æ€§
- è™šçº¿è¡¨æ ¼è¾¹ç•Œè¯†åˆ«ä¸å‡†ç¡®

### ğŸ“ˆ è¡¨æ ¼è¿˜åŸå‡†ç¡®åº¦è¯„ä¼°

| è¡¨æ ¼ç±»å‹ | ç»“æ„è¿˜åŸ | å†…å®¹è¯†åˆ« | æ•´ä½“è¯„åˆ† |
|---------|---------|---------|---------|
| ç®€å•è¡¨æ ¼ | â­â­â­â­â˜† | â­â­â­â˜†â˜† | â­â­â­â˜†â˜† (75%) |
| å¤æ‚è¡¨æ ¼ | â­â­â˜†â˜†â˜† | â­â­â˜†â˜†â˜† | â­â­â˜†â˜†â˜† (45%) |
| åµŒå¥—è¡¨æ ¼ | â­â˜†â˜†â˜†â˜† | â­â­â˜†â˜†â˜† | â­â˜†â˜†â˜†â˜† (30%) |

**æ€»ä½“è¡¨æ ¼è¿˜åŸèƒ½åŠ›**: â­â­â˜†â˜†â˜† (50%)

### ğŸ” è¡¨æ ¼è¿˜åŸé—®é¢˜åˆ†æ

#### **1. ç»“æ„è¯†åˆ«é—®é¢˜**

**è¡Œåˆ—è¯†åˆ«é”™è¯¯**:
```python
# æœŸæœ›çš„è¡¨æ ¼ç»“æ„
[
  ["å§“å", "å¼ å®¶é“¨", "æ€§åˆ«", "ç”·"],
  ["å‡ºç”Ÿæ—¥æœŸ", "79å¹´5æœˆ29æ—¥", "å¹´é¾„", "26å²"]
]

# å®é™…OCRè¯†åˆ«ç»“æœ
[
  ["å§“å å¼ å®¶é“¨ æ€§åˆ« ç”·"],
  ["å‡ºç”Ÿæ—¥æœŸ 79å¹´5æœˆ29æ—¥", "å¹´é¾„", "26å²"]
]
```

**å•å…ƒæ ¼è¾¹ç•Œä¸¢å¤±**:
- ç›¸é‚»å•å…ƒæ ¼å†…å®¹åˆå¹¶
- è·¨è¡Œå†…å®¹è¯†åˆ«ä¸ºå•è¡Œ
- è¡¨æ ¼çº¿æ¡æœªè¢«æ­£ç¡®è¯†åˆ«ä¸ºåˆ†éš”ç¬¦

#### **2. å†…å®¹å¯¹åº”é—®é¢˜**

**æ ‡ç­¾-å€¼å¯¹åº”é”™è¯¯**:
- æ ‡ç­¾ä¸å¯¹åº”å€¼åˆ†ç¦»
- å¤šä¸ªå€¼å¯¹åº”åˆ°é”™è¯¯æ ‡ç­¾
- ç©ºç™½å•å…ƒæ ¼å¤„ç†ä¸å½“

#### **3. æ ¼å¼ä¿æŒé—®é¢˜**

**åŸå§‹æ ¼å¼ä¸¢å¤±**:
- è¡¨æ ¼å¯¹é½æ–¹å¼ä¸¢å¤±
- å•å…ƒæ ¼å†…æ¢è¡Œä¸¢å¤±
- ç‰¹æ®Šç¬¦å·ï¼ˆå‹¾é€‰æ¡†ï¼‰ä½ç½®é”™è¯¯

### ğŸ’¡ è¡¨æ ¼è¿˜åŸä¼˜åŒ–æ–¹æ¡ˆ

#### **1. é¢„å¤„ç†ä¼˜åŒ–**

```python
# è¡¨æ ¼çº¿æ¡å¢å¼º
def enhance_table_lines(image):
    # æ£€æµ‹æ°´å¹³çº¿æ¡
    horizontal_kernel = cv2.getStructuringElement(cv2.MORPH_RECT, (40, 1))
    horizontal_lines = cv2.morphologyEx(image, cv2.MORPH_OPEN, horizontal_kernel)
    
    # æ£€æµ‹å‚ç›´çº¿æ¡
    vertical_kernel = cv2.getStructuringElement(cv2.MORPH_RECT, (1, 40))
    vertical_lines = cv2.morphologyEx(image, cv2.MORPH_OPEN, vertical_kernel)
    
    # åˆå¹¶çº¿æ¡
    table_structure = cv2.addWeighted(horizontal_lines, 0.5, vertical_lines, 0.5, 0.0)
    return table_structure
```

#### **2. è¡¨æ ¼æ£€æµ‹ç®—æ³•**

```python
# åŸºäºè½®å»“çš„è¡¨æ ¼æ£€æµ‹
def detect_table_cells(image):
    # æŸ¥æ‰¾è½®å»“
    contours, _ = cv2.findContours(image, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
    
    # è¿‡æ»¤è¡¨æ ¼å•å…ƒæ ¼
    cells = []
    for contour in contours:
        x, y, w, h = cv2.boundingRect(contour)
        if w > 50 and h > 20:  # æœ€å°å•å…ƒæ ¼å°ºå¯¸
            cells.append((x, y, w, h))
    
    return sorted(cells, key=lambda cell: (cell[1], cell[0]))  # æŒ‰è¡Œåˆ—æ’åº
```

#### **3. ä¸“ç”¨è¡¨æ ¼OCR**

**æ¨èå·¥å…·**:
- **Table Transformer**: å¾®è½¯çš„è¡¨æ ¼ç†è§£æ¨¡å‹
- **PaddleOCRè¡¨æ ¼ç‰ˆ**: ä¸“é—¨ä¼˜åŒ–çš„è¡¨æ ¼OCR
- **Amazon Textract**: äº‘ç«¯è¡¨æ ¼åˆ†ææœåŠ¡

#### **4. åå¤„ç†ç®—æ³•**

```python
# è¡¨æ ¼ç»“æ„é‡å»º
def reconstruct_table_structure(ocr_results, table_cells):
    table = []
    
    for row_cells in group_cells_by_row(table_cells):
        row = []
        for cell in row_cells:
            # æŸ¥æ‰¾è¯¥å•å…ƒæ ¼å†…çš„OCRæ–‡æœ¬
            cell_text = find_text_in_cell(ocr_results, cell)
            row.append(cell_text)
        table.append(row)
    
    return table
```

### ğŸ¯ è¡¨æ ¼è¿˜åŸæ”¹è¿›å»ºè®®

#### **1. çŸ­æœŸæ”¹è¿›**
- **å‚æ•°è°ƒä¼˜**: è°ƒæ•´Tesseractçš„è¡¨æ ¼è¯†åˆ«å‚æ•°
- **é¢„å¤„ç†å¢å¼º**: å¢å¼ºè¡¨æ ¼çº¿æ¡ï¼Œå‡å°‘å™ªå£°
- **åå¤„ç†ä¿®æ­£**: åŸºäºè§„åˆ™çš„è¡¨æ ¼ç»“æ„ä¿®æ­£

#### **2. ä¸­æœŸæ”¹è¿›**
- **å¤šå¼•æ“èåˆ**: ç»“åˆå¤šä¸ªOCRå¼•æ“çš„ç»“æœ
- **æœºå™¨å­¦ä¹ **: è®­ç»ƒè¡¨æ ¼ç»“æ„è¯†åˆ«æ¨¡å‹
- **æ¨¡æ¿åŒ¹é…**: é’ˆå¯¹ä¿é™©è¡¨å•çš„ä¸“ç”¨æ¨¡æ¿

#### **3. é•¿æœŸæ”¹è¿›**
- **ç«¯åˆ°ç«¯æ¨¡å‹**: ä½¿ç”¨æ·±åº¦å­¦ä¹ çš„è¡¨æ ¼ç†è§£æ¨¡å‹
- **å¤šæ¨¡æ€èåˆ**: ç»“åˆè§†è§‰å’Œæ–‡æœ¬ä¿¡æ¯
- **äººæœºåä½œ**: æ™ºèƒ½è¾…åŠ©çš„äººå·¥æ ¡éªŒç³»ç»Ÿ

### ğŸ“‹ å®é™…åº”ç”¨å»ºè®®

#### **1. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²**
```python
# è¡¨æ ¼å¤„ç†æµæ°´çº¿
def process_insurance_form(image):
    # 1. è¡¨æ ¼æ£€æµ‹
    tables = detect_tables(image)
    
    # 2. å•å…ƒæ ¼åˆ†å‰²
    cells = segment_table_cells(tables)
    
    # 3. OCRè¯†åˆ«
    ocr_results = ocr_engine.process(cells)
    
    # 4. ç»“æ„é‡å»º
    structured_data = reconstruct_table(ocr_results)
    
    # 5. æ•°æ®éªŒè¯
    validated_data = validate_insurance_data(structured_data)
    
    return validated_data
```

#### **2. è´¨é‡æ§åˆ¶**
- **ç½®ä¿¡åº¦é˜ˆå€¼**: ä½ç½®ä¿¡åº¦å†…å®¹æ ‡è®°äººå·¥å®¡æ ¸
- **æ•°æ®éªŒè¯**: åŸºäºä¸šåŠ¡è§„åˆ™çš„æ•°æ®åˆç†æ€§æ£€æŸ¥
- **A/Bæµ‹è¯•**: å¯¹æ¯”ä¸åŒOCRæ–¹æ¡ˆçš„æ•ˆæœ

### ğŸ† ç»“è®º

**è¡¨æ ¼è¿˜åŸç°çŠ¶**:
- **ç®€å•è¡¨æ ¼**: åŸºæœ¬å¯ç”¨ï¼Œéœ€è¦åå¤„ç†ä¼˜åŒ–
- **å¤æ‚è¡¨æ ¼**: éœ€è¦ä¸“ç”¨ç®—æ³•å’Œäººå·¥è¾…åŠ©
- **ç”Ÿäº§åº”ç”¨**: å»ºè®®åˆ†é˜¶æ®µéƒ¨ç½²ï¼Œé€æ­¥ä¼˜åŒ–

**æ¨èç­–ç•¥**:
1. **åˆ†ç±»å¤„ç†**: æ ¹æ®è¡¨æ ¼å¤æ‚åº¦é€‰æ‹©ä¸åŒç­–ç•¥
2. **äººæœºç»“åˆ**: è‡ªåŠ¨è¯†åˆ« + äººå·¥æ ¡éªŒ
3. **æŒç»­ä¼˜åŒ–**: åŸºäºå®é™…æ•°æ®ä¸æ–­æ”¹è¿›æ¨¡å‹

